{"version":3,"sources":["webpack:///./src/views/loadingScreen.vue","webpack:///src/views/loadingScreen.vue","webpack:///./src/views/loadingScreen.vue?46ad","webpack:///./src/views/loadingScreen.vue?ea81","webpack:///./src/views/loadingScreen.vue?abe7"],"names":["render","_vm","this","_self","_c","_m","staticRenderFns","staticStyle","staticClass","_v","console","axios","header","Authorization","params","clientVersion","setTimeout","name","query","update","force","plus","alert","dtask","showLoading","prg","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAQD,EAAIE,MAAMC,GAAG,OAAOH,EAAII,GAAG,IAEtEC,EAAkB,CAAC,WAAY,IAAIL,EAAIC,KAAKE,EAAGH,EAAIE,MAAMC,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,CAAC,MAAQ,OAAO,OAAS,SAAS,CAACH,EAAG,MAAM,CAACI,YAAY,SAASJ,EAAG,MAAM,CAACI,YAAY,YAAY,CAACP,EAAIQ,GAAG,mBAAmBL,EAAG,MAAM,CAACI,YAAY,gBAAgB,CAACP,EAAIQ,GAAG,cAAcL,EAAG,MAAM,CAACI,YAAY,uB,qBCS/R,GACf,gBACA,8DACA,yDAGA,GAFAE,8BACAA,mCACA,GACAC,sBAEAC,QACA,mDACAC,kBAGA,+EACAC,QACAC,yBAIA,GADAL,gCACA,kBAEA,GADAA,oCACA,wBACAM,gBACA,mBAAAC,cAAAC,OAAAC,kBAEA,UACA,4BACA,kFAAAC,WAAA,cAEA,GADAV,kCACA,QACA,iBACAW,wBAAAD,WAAA,WACAC,6BACAX,0BACAW,4CACAA,6BAEA,YACAA,6BACAX,gDACAW,gEAGAC,gCAGAC,UAEA,QACA,oCACAA,iDAEA,gBACA,OACAC,mBACA,MACA,OACAC,qEACAD,6BACA,MACA,OACAH,6BAEA,eAIAL,gBACA,aACA,mBAAAC,cAEA,mBAAAA,gBAEA,KAGAP,oBAEAA,iCACAM,gBACA,aACA,mBAAAC,cAEA,mBAAAA,gBAKA,OCpGuV,I,wBCQnVS,EAAY,eACd,EACA1B,EACAM,GACA,EACA,KACA,KACA,MAIa,aAAAoB,E,oECnBf","file":"js/chunk-0624ebc7.55b4aeb0.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"}},[_c('div',{staticClass:\"logo\"}),_c('div',{staticClass:\"logoName\"},[_vm._v(\"中国石油天然气股份有限公司\")]),_c('div',{staticClass:\"logoNameFirm\"},[_vm._v(\"独山子石化分公司\")]),_c('div',{staticClass:\"logoBackground\"})])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div style=\"width:100%;height:100%\">\r\n        <div class=\"logo\"></div>\r\n        <div class=\"logoName\">中国石油天然气股份有限公司</div>\r\n        <div class=\"logoNameFirm\">独山子石化分公司</div>\r\n        <div class=\"logoBackground\"></div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n  async created () {\r\n    const cookie = JSON.parse(window.localStorage.getItem('userCookie'))\r\n    const userMassage = JSON.parse(window.localStorage.getItem('userMassage'))\r\n    console.log('cookie111234', cookie)\r\n    console.log('userMassage111234', userMassage)\r\n    if (cookie) {\r\n      axios.defaults.headers = {\r\n      // 公共请求头配置\r\n        header: {\r\n          'content-type': 'application/x-www-form-urlencoded',\r\n          Authorization: cookie\r\n        }\r\n      }\r\n      const Version = await this.$getHttp(`${this.$baseUrl}/OS-PM/mobile/v1.0/getVersionInfo`, {\r\n        params: {\r\n          clientVersion: '1.0.0'\r\n        }\r\n      })\r\n      console.log('VersionVersion', Version)\r\n      if (Version && Version.status === 200) {\r\n        console.log('loadingScreen666', Version, userMassage)\r\n        if (Version.data.updateFlag === '1') {\r\n          setTimeout(() => {\r\n            this.$router.push({ name: 'update', query: { update: Version.data } })  // 暂时先禁掉更新页\r\n            // this.$router.push({ name: 'VersionSelection' })\r\n          }, 3000)\r\n        } else if (Version.data.updateFlag === '2') { //  强制升级\r\n          const dtask = plus.downloader.createDownload(`${this.$baseUrl}/OS-PM/${Version.data.pkgUrl}`, {force: true}, function ( d, status ) {\r\n            console.log('createDownload',d, status)\r\n            if (status == 200) { // 下载成功    \r\n              var path = (d.filename);    \r\n              plus.runtime.install(path,{ force: true},function(){\r\n                plus.nativeUI.closeWaiting();\r\n                console.log(\"安装wgt文件成功！\");\r\n                plus.nativeUI.alert(\"应用资源更新完成！\",function(){\r\n                  plus.runtime.restart();\r\n                });\r\n              },function(e){\r\n                plus.nativeUI.closeWaiting();\r\n                console.log(\"安装wgt文件失败[\"+e.code+\"]：\"+e.message);\r\n                plus.nativeUI.alert(\"安装wgt文件失败[\"+e.code+\"]：\"+e.message);\r\n              });\r\n            } else {//下载失败    \r\n              alert( \"Download failed: \" + status );\r\n            }      \r\n            })\r\n          dtask.start();  \r\n\r\n            let prg = 0;  \r\n            let showLoading = plus.nativeUI.showWaiting(\"正在下载\");  \r\n            dtask.addEventListener('statechanged', function(task, status) {  \r\n              // 给下载任务设置一个监听 并根据状态  做操作  \r\n              switch (task.state) {  \r\n                case 1:  \r\n                  showLoading.setTitle(\"正在下载\");  \r\n                  break;  \r\n                case 3:  \r\n                  prg = parseInt((parseFloat(task.downloadedSize) / parseFloat(task.totalSize)) * 100);  \r\n                  showLoading.setTitle(\"  正在下载\" + prg + \"%  \");  \r\n                  break;  \r\n                case 4:  \r\n                    plus.nativeUI.closeWaiting();  \r\n                  //下载完成  \r\n                  break;  \r\n              } \r\n            })\r\n        } else {\r\n          setTimeout(() => {\r\n            if (userMassage && userMassage.isLogin) {\r\n              this.$router.push({ name: 'Home' })\r\n            } else {\r\n              this.$router.push({ name: 'Login' })\r\n            }\r\n          }, 3000)\r\n        }\r\n      }\r\n      console.log(Version)\r\n    } else {\r\n        console.log('loadingScreen77', userMassage)\r\n      setTimeout(() => {\r\n        if (userMassage && userMassage.isLogin) {\r\n          this.$router.push({ name: 'Home' })\r\n        } else {\r\n          this.$router.push({ name: 'Login' })\r\n        }\r\n        // this.$router.push({\r\n        //   name: 'Login'\r\n        // })\r\n      }, 3000)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.logo{\r\n    width:6rem;\r\n    height:6rem;\r\n    background:url('../assets/logo.svg') no-repeat;\r\n    position: absolute;\r\n    top: 19%;\r\n    left: 39%;\r\n}\r\n.logoName{\r\n    font-weight: 700;\r\n    font-size: 1.3rem;\r\n    position: absolute;\r\n    top: 34%;\r\n    left: 15%;\r\n}\r\n.logoNameFirm{\r\n    font-weight: 400;\r\n    font-size: 1rem;\r\n    position: absolute;\r\n    top: 39%;\r\n    left: 34%;\r\n}\r\n.logoBackground{\r\n    width: 100%;\r\n    height: 15.7rem;\r\n    position: absolute;\r\n    bottom: 0;\r\n    background:url('../assets/loadingBackground.svg') no-repeat;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./loadingScreen.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./loadingScreen.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./loadingScreen.vue?vue&type=template&id=907e7e12&\"\nimport script from \"./loadingScreen.vue?vue&type=script&lang=js&\"\nexport * from \"./loadingScreen.vue?vue&type=script&lang=js&\"\nimport style0 from \"./loadingScreen.vue?vue&type=style&index=0&id=907e7e12&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./loadingScreen.vue?vue&type=style&index=0&id=907e7e12&prod&lang=css&\""],"sourceRoot":""}