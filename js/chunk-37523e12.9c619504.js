(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37523e12"],{8091:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"updateTitle"},[t._v("检查升级")]),e("div",{staticStyle:{margin:"0 1rem"}},[e("div",{staticClass:"title"},[t._v("更新内容")]),e("div",{staticStyle:{"margin-top":"0.5rem"}},[t._v(t._s(t.$route.query.update.note))])]),e("div",[1==t.$route.query.update.updateFlag?e("div",{staticStyle:{position:"absolute",bottom:"4%",left:"10%",color:"#1F4BF4"},on:{click:t.pass}},[t._v("跳过")]):t._e(),e("div",{staticStyle:{position:"absolute",bottom:"3%",right:"9%",width:"7rem",height:"40px"}},[e("van-button",{attrs:{round:"",type:"info"},on:{click:t.update}},[t._v("升级")])],1)])])},s=[],i={created(){console.log(this.$route.query)},methods:{async pass(){const t=JSON.parse(window.localStorage.getItem("versionMsg"));if(console.log(t),t){const e=await this.$getHttp(this.$baseUrl+"/OS-PM/version/getAllVersion",{}),a=[];for(let t=0;t<e.data.length;t++){const o={text:e.data[t].versionName,value:e.data[t].id};a.push(o)}this.$router.push({name:"Home",query:{title:t.title,value:t.value,option:a}})}else this.$router.push({name:"VersionSelection"})},update(){console.log("点击更新111111222223334445566777"),setTimeout(()=>{const t=plus.downloader.createDownload(`${this.$baseUrl}/OS-PM/${this.$route.query.update.pkgUrl}`,{force:!0},(function(t,e){if(console.log("createDownload",t,e),200==e){var a=t.filename;plus.runtime.install(a,{force:!0},(function(){plus.nativeUI.closeWaiting(),console.log("安装wgt文件成功！"),plus.nativeUI.alert("应用资源更新完成！",(function(){plus.runtime.restart()}))}),(function(t){plus.nativeUI.closeWaiting(),console.log("安装wgt文件失败["+t.code+"]："+t.message),plus.nativeUI.alert("安装wgt文件失败["+t.code+"]："+t.message)}))}else alert("Download failed: "+e)}));t.start();let e=0,a=plus.nativeUI.showWaiting("正在下载");t.addEventListener("statechanged",(function(t,o){switch(t.state){case 1:a.setTitle("正在下载");break;case 3:e=parseInt(parseFloat(t.downloadedSize)/parseFloat(t.totalSize)*100),a.setTitle("  正在下载"+e+"%  ");break;case 4:plus.nativeUI.closeWaiting();break}}))},1e3)}}},n=i,l=(a("e27c"),a("2877")),r=Object(l["a"])(n,o,s,!1,null,"047ed6a4",null);e["default"]=r.exports},a0be:function(t,e,a){},e27c:function(t,e,a){"use strict";a("a0be")}}]);
//# sourceMappingURL=chunk-37523e12.9c619504.js.map