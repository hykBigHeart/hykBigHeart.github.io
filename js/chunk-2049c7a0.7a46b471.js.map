{"version":3,"sources":["webpack:///./src/views/problemMange/problemMangeDetails.vue?9e4e","webpack:///./src/assets/problemManageSvg/img.svg","webpack:///./src/assets/problemManageSvg/deleteSvg.svg","webpack:///./src/views/problemMange/problemHandling.vue","webpack:///src/views/problemMange/problemHandling.vue","webpack:///./src/views/problemMange/problemHandling.vue?0144","webpack:///./src/views/problemMange/problemHandling.vue?e549","webpack:///./src/assets/problemManageSvg/hook.svg","webpack:///./src/assets/problemManageSvg/add_img.svg","webpack:///./src/views/problemMange/problemHandling.vue?433c","webpack:///./src/assets/problemManageSvg/date.svg","webpack:///./src/views/problemMange/problemMangeDetails.vue","webpack:///src/views/problemMange/problemMangeDetails.vue","webpack:///./src/views/problemMange/problemMangeDetails.vue?7628","webpack:///./src/views/problemMange/problemMangeDetails.vue?18c7","webpack:///./src/assets/problemManageSvg/doubleHook.svg","webpack:///./src/assets/close.svg"],"names":["module","exports","render","_vm","this","_c","_self","staticClass","attrs","titleText","close","on","changeClose","userName","_m","date","_v","_s","Date","toLocaleDateString","replace","_l","problemImg","item","key","id","staticStyle","$event","showImg","imgPath","img","imgName","ref","afterRead","add_img","$refs","vanUploader","chooseFile","forwardTitle","forward","handelChange","model","value","forwardValue","callback","$$v","expression","style","width","show","changeTimeType","curDateText","curTimeText","timeType","confirm","cancel","timeChange","currentDate","completionTitle","completion","completionChange","completionValue","directives","name","rawName","description","domProps","target","composing","submit","staticRenderFns","components","navBar","data","showTime","overTime","pictureId","problemList","justProblem","questionId","justType","text","methods","u8arr","type","console","fromData","then","res","catch","err","handleTime","ImagePreview","params","personId","fileId","alert","state","comment","getCurTime","y","month","day","year","hour","minute","second","hour12","getCurProblem","paramsName","getProblemList","getPeople","reset","mounted","component","deleteSvg","openDelete","info","agreementName","agreementCode","agreementCategory","oneCategory","twoCategory","confContent","programFileName","questionSize","score","check_contractor","check_user","checkTime","project_name","project_code","supervisory_unit","contractor","territorial_unit","question_category","question_major","question_content","file","$set","a_boss","a_guardian","b_boss","b_guardian","handleBackStr","contractor_director","supervisory_director","territorial_director","koufen","money","isScene","banId","cpersonId","person","i","personType","personName","btnSTate","to","hook","doubleHook","btnTextVisible","_e","padding","mustDel","height","handlingShow","changeCloseHandling","problemHandling","computed","flag","fileList","getProblemDetails","url","getUserName","str","backStr","changeScroll","window","timeoutHdr","document","beforeDestroy"],"mappings":"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ACf+C,4BACAQ,YACAC,eAEAC,OACA,OACAhE,aAEAwC,QACAQ,iBACAJ,gBACAqB,iBACAvB,eACAC,eACAuB,YACArD,cACAsD,aACAjC,gBACAL,gBACAC,WACA1B,YACAgE,eACAC,eACApE,gBACAK,eACAe,cACAI,kBAGA6C,cACAC,YAIArB,aAAAsB,UAAAvC,SAAA,CAAAuC,WAAAvC,UACAgB,mBACAG,mBACAI,iBAGAiB,SACAjD,aAGA,gBAGA,mBACA,2BACA,aACA,WACA,oBACA,UACAkD,qBAEA,uBAAAC,SAZAC,2BAcA,qBACAC,gDACAD,0BACA,gDACAC,GACAC,KAAAC,IACAH,wBACA,gBACA,oCACA,sBAAAtD,sDAAAF,6BAAAJ,uBAEAgE,MAAAC,QAIA9E,cACA,aACA,mCAEA+E,aACA,aACA,qBACA,2BAEA/D,WACAgE,qBAEApD,gBACA,yBACA,cACA,6BAIAoB,oBACA,4BACA,cACA,gCAIAN,WAEA,aACA,uBAEAC,UAEA,cAEAC,kBACA,0BAEA,oBACA,yDACA,wDAGAN,kBACA,WACA,qCAIA,iBAEAmB,SACA,0BACA,4EACA,CACAwB,QACAd,2BACAK,mBACAU,2BACAC,mDACAhC,uBACAY,+DAGAY,KAAAC,IACAH,8BACA,eACA,2CAGA,CACA,4BAEA,YADAW,iBAGA,gFACA,CACAH,QACAd,2BACAkB,iDACAC,4BAGAX,KAAAC,IACAH,kCACA,eACA,sCAMAc,gBAEA,UACA,sBACA,8CAEAC,uCACAC,yCACAC,uCACA,IACA,wCAAAC,eAAAF,gBAAAC,cAAAE,eAAAC,iBAAAC,iBAAAC,YAAA,oBAEA,uCACA,8CAGA,IAGA,qDAEA,kCAGA,oBACA,mEACAtB,gCACA,gBACA,0BACAA,6CAGAuB,iBACA,SACA,6EAAAnF,OAAA,SACA4D,kDACA,mBACA,kDACAwB,qCACA,qBACA,kDACAA,2CACA,sBAEAA,2CACA,qBAEA,sBAMAC,kBACA,oBACA,oBACA,SACA,yFAEAzB,6BACA,mBACA,sCACAA,iDACAA,6BACA,qEACAA,4CACA,6EAAA5D,4BAAA,SACA4D,6BACA,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","file":"js/chunk-2049c7a0.7a46b471.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./problemMangeDetails.vue?vue&type=style&index=0&id=a20ab11a&prod&lang=less&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/img.f335936e.svg\";","module.exports = __webpack_public_path__ + \"img/deleteSvg.b19a4cd1.svg\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"mobile-title\"},[_c('navBar',{attrs:{\"titleText\":_vm.titleText,\"svgIcon\":_vm.close},on:{\"changeClose\":_vm.changeClose}})],1),(_vm.titleText == '问题处理')?_c('div',[_c('div',{staticClass:\"mobile-body\"},[_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"承包商处理人\",\"label\":this.userName ? this.userName : '无'}}),_c('div',{staticClass:\"item\"},[_vm._m(0),_c('div',{staticClass:\"time-frame\"},[_c('img',{attrs:{\"src\":_vm.date}}),_c('span',[_vm._v(_vm._s(new Date().toLocaleDateString().replace(/\\//g, '-')))])])]),_c('div',{staticClass:\"item\"},[_c('p',[_vm._v(\"问题图片\")]),_vm._l((_vm.problemImg),function(item){return _c('div',{key:item.id,staticClass:\"img-frame\",staticStyle:{\"margin\":\"0.5rem 0rem\"},on:{\"click\":function($event){return _vm.showImg(item.imgPath)}}},[_c('img',{attrs:{\"src\":_vm.img}}),_c('span',[_vm._v(_vm._s(item.imgName))])])}),_c('van-uploader',{ref:\"vanUploader\",staticStyle:{\"display\":\"none\"},attrs:{\"show-upload\":true,\"after-read\":_vm.afterRead}}),_c('img',{attrs:{\"src\":_vm.add_img},on:{\"click\":function($event){return _vm.$refs.vanUploader.chooseFile()}}})],2),_c('div',{staticClass:\"item\",staticStyle:{\"margin-top\":\"2.625rem\"}},[_c('p',[_vm._v(\"转发 \")]),_c('van-dropdown-menu',{attrs:{\"get-container\":\"body\"}},[_c('van-dropdown-item',{attrs:{\"title\":_vm.forwardTitle,\"options\":_vm.forward},on:{\"change\":_vm.handelChange},model:{value:(_vm.forwardValue),callback:function ($$v) {_vm.forwardValue=$$v},expression:\"forwardValue\"}})],1)],1)],1),_c('van-popup',{staticClass:\"time-popup\",style:({ width: '70%' }),attrs:{\"round\":\"\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('h3',[_vm._v(\"选择时间\")]),_c('p',{staticStyle:{\"text-align\":\"center\"}},[_c('span',{on:{\"click\":function($event){return _vm.changeTimeType('date')}}},[_vm._v(_vm._s(_vm.curDateText))]),_vm._v(\" \"),_c('span',{on:{\"click\":function($event){return _vm.changeTimeType('time')}}},[_vm._v(_vm._s(_vm.curTimeText))])]),_c('van-datetime-picker',{attrs:{\"type\":_vm.timeType},on:{\"confirm\":_vm.confirm,\"cancel\":_vm.cancel,\"change\":_vm.timeChange},model:{value:(_vm.currentDate),callback:function ($$v) {_vm.currentDate=$$v},expression:\"currentDate\"}})],1)],1):_c('div',[_c('div',{staticClass:\"mobile-body\"},[_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"验证人\",\"label\":this.userName ? this.userName : '无'}}),_c('div',{staticClass:\"item\"},[_vm._m(1),_c('van-dropdown-menu',{attrs:{\"get-container\":\"body\"}},[_c('van-dropdown-item',{attrs:{\"title\":_vm.completionTitle,\"options\":_vm.completion},on:{\"change\":_vm.completionChange},model:{value:(_vm.completionValue),callback:function ($$v) {_vm.completionValue=$$v},expression:\"completionValue\"}})],1)],1),_c('div',{staticClass:\"item\"},[_c('p',[_vm._v(\"问题验证时间\")]),_c('div',{staticClass:\"time-frame\"},[_c('img',{attrs:{\"src\":_vm.date}}),_c('span',[_vm._v(_vm._s(new Date().toLocaleDateString().replace(/\\//g, '-')))])])]),_c('div',{staticClass:\"item\"},[_c('p',[_vm._v(\"验证意见\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.description),expression:\"description\"}],attrs:{\"cols\":\"30\",\"rows\":\"5\",\"placeholder\":\"请输入\"},domProps:{\"value\":(_vm.description)},on:{\"input\":function($event){if($event.target.composing)return;_vm.description=$event.target.value}}})])],1)]),_c('van-button',{staticClass:\"float-button\",attrs:{\"round\":\"\",\"type\":\"info\",\"block\":\"\"},on:{\"click\":_vm.submit}},[_vm._v(\"提交\")])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"问题整改完成时间 \"),_c('span',{staticStyle:{\"color\":\"#f20909\"}},[_vm._v(\"*\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"完成情况 \"),_c('span',{staticStyle:{\"color\":\"#f20909\"}},[_vm._v(\"*\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n<!-- 问题处理 问题验证公用组件 -->\r\n  <div class=\"container\">\r\n    <div class=\"mobile-title\">\r\n      <navBar :titleText=\"titleText\" :svgIcon='close' @changeClose=\"changeClose\"></navBar>\r\n    </div>\r\n    <div v-if=\"titleText == '问题处理'\">\r\n      <div class=\"mobile-body\">\r\n        <van-cell center title=\"承包商处理人\" :label=\"this.userName ? this.userName : '无'\" />\r\n        <div class=\"item\">\r\n          <p>问题整改完成时间 <span style=\"color: #f20909\">*</span></p>\r\n          <div class=\"time-frame\">\r\n            <img :src=\"date\">\r\n            <span>{{new Date().toLocaleDateString().replace(/\\//g, '-')}}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"item\">\r\n          <p>问题图片</p>\r\n          <div class=\"img-frame\" style=\"margin: 0.5rem 0rem\" @click=\"showImg(item.imgPath)\" v-for=\"item in problemImg\" :key=\"item.id\">\r\n            <img :src=\"img\">\r\n            <span>{{item.imgName}}</span>\r\n          </div>\r\n          <van-uploader style=\"display: none\" ref=\"vanUploader\" :show-upload='true' :after-read=\"afterRead\" />\r\n          <img :src=\"add_img\" @click=\"$refs.vanUploader.chooseFile()\">\r\n        </div>\r\n        <div class=\"item\" style=\"margin-top: 2.625rem\">\r\n          <p>转发 </p>\r\n          <van-dropdown-menu get-container=\"body\" >\r\n            <van-dropdown-item v-model=\"forwardValue\" :title='forwardTitle' :options=\"forward\" @change=\"handelChange\"/>\r\n          </van-dropdown-menu>\r\n        </div>\r\n      </div>\r\n      <!-- 选择时间弹窗 start -->\r\n      <van-popup class=\"time-popup\" v-model=\"show\" round :style=\"{ width: '70%' }\">\r\n        <h3>选择时间</h3>\r\n        <p style=\"text-align: center\"><span @click=\"changeTimeType('date')\">{{curDateText}}</span> <span @click=\"changeTimeType('time')\">{{curTimeText}}</span></p>\r\n        <van-datetime-picker\r\n          v-model=\"currentDate\"\r\n          :type=\"timeType\"\r\n          @confirm='confirm'\r\n          @cancel='cancel'\r\n          @change='timeChange'\r\n        />\r\n          <!-- title=\"选择年月日\" -->\r\n          <!-- :min-date=\"minDate\"\r\n          :max-date=\"maxDate\" -->\r\n      </van-popup>\r\n      <!-- 选择时间弹窗 end -->\r\n    </div>\r\n    <div v-else>\r\n      <div class=\"mobile-body\">\r\n        <van-cell center title=\"验证人\" :label=\"this.userName ? this.userName : '无'\" />\r\n        <div class=\"item\">\r\n          <p>完成情况 <span style=\"color: #f20909\">*</span></p>\r\n          <van-dropdown-menu get-container=\"body\" >\r\n            <van-dropdown-item v-model=\"completionValue\" :title='completionTitle' :options=\"completion\" @change=\"completionChange\"/>\r\n          </van-dropdown-menu>\r\n        </div>\r\n        <div class=\"item\">\r\n          <p>问题验证时间</p>\r\n          <div class=\"time-frame\">\r\n            <img :src=\"date\">\r\n            <span>{{new Date().toLocaleDateString().replace(/\\//g, '-')}}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"item\">\r\n          <p>验证意见</p>\r\n          <textarea v-model=\"description\" cols=\"30\" rows=\"5\" placeholder=\"请输入\"></textarea>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n      <van-button class=\"float-button\" round type=\"info\" block @click=\"submit\">提交</van-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport navBar from '@/components/navBar.vue';\r\nimport { ImagePreview } from 'vant';\r\nexport default {\r\n  name: 'ProblemMangeHandling',\r\n  components: {\r\n    navBar\r\n  },\r\n  data() {\r\n    return {\r\n      titleText: '',\r\n\r\n      show: false,\r\n      currentDate: null,\r\n      timeType: 'date',\r\n      showTime: '请选择时间',\r\n      curDateText: '',\r\n      curTimeText: '',\r\n      overTime: '',\r\n      problemImg: [],\r\n      pictureId: [],\r\n      forwardValue: '',\r\n      forwardTitle: '',\r\n      forward: [],  //  转发\r\n      userName: '',\r\n      problemList: [],\r\n      justProblem: [],  //  刚新增的问题\r\n      close: require('@/assets/close.svg'),\r\n      date: require('@/assets/problemManageSvg/date.svg'),\r\n      img: require('@/assets/problemManageSvg/img.svg'),  \r\n      add_img: require('@/assets/problemManageSvg/add_img.svg'),\r\n\r\n      /* 提交参数 ↓ */ \r\n      questionId: '',\r\n      justType: '',\r\n\r\n\r\n      /* 问题验证 ↓ */ \r\n      completion: [{text: '合格', value: 0}, {text: '不合格', value: 1}],\r\n      completionTitle: '',\r\n      completionValue: '',\r\n      description: ''\r\n    }\r\n  },\r\n  methods: {\r\n    afterRead(file) {\r\n      // 此时可以自行将文件上传至服务器\r\n      console.log('afterRead', file);\r\n      function dataURLtoFileFun(dataurl, filename) {  //  转二进制\r\n        // console.log('dataurl', dataurl, 'filename', filename)\r\n        // 将base64转换为文件，dataurl为base64字符串，filename为文件名（必须带后缀名，如.jpg,.png）\r\n        let arr = dataurl.split(\",\");\r\n        let mime = arr[0].match(/:(.*?);/)[1];\r\n        let bstr = atob(arr[1]);\r\n        let n = bstr.length;\r\n        let u8arr = new Uint8Array(n);\r\n        while (n--) {\r\n          u8arr[n] = bstr.charCodeAt(n);\r\n        }\r\n        return new File([u8arr], filename, { type: mime });\r\n      }\r\n      const fromData = new FormData();  //  需要传formData类型\r\n      fromData.append('uploadFile', dataURLtoFileFun(file.content, file.file.name))\r\n      console.log('fromData', fromData)\r\n      this.$postHttp(`${this.$baseUrl}/CMS/file/upload`, \r\n      fromData\r\n      ).then(res=> {\r\n        console.log('upload', res)\r\n        if (res.status == 200) {\r\n          this.pictureId.push(res.data.data.id);\r\n          this.problemImg.push({imgName: res.data.data.fileName + '.' + res.data.data.fileType,imgPath: res.data.data.filePath, id: res.data.data.id})\r\n        }\r\n      }).catch(err=> {\r\n\r\n      })\r\n    },\r\n    changeClose() {\r\n      this.reset();\r\n      this.$emit('changeCloseHandling')\r\n    },\r\n    handleTime() {\r\n      this.show = true;\r\n      this.timeType = 'date';\r\n      this.getCurTime(new Date())\r\n    },\r\n    showImg(imgPath) {\r\n      ImagePreview([imgPath]);\r\n    },\r\n    handelChange(val) {\r\n      this.forward.forEach(obj => {\r\n        if (obj.value === val) {\r\n          this.forwardTitle = obj.text\r\n        }\r\n      })\r\n    },\r\n    completionChange(val) {  //  改变完成情况触发\r\n      this.completion.forEach(obj => {\r\n        if (obj.value === val) {\r\n          this.completionTitle = obj.text\r\n        }\r\n      })\r\n    },\r\n    confirm(val) {  //  确认\r\n      // debugger\r\n      this.show = false;\r\n      this.getCurTime(val, true);\r\n    },\r\n    cancel(val) {\r\n      // debugger\r\n      this.show = false;\r\n    },\r\n    timeChange(picker, value, colum) {\r\n      if (this.timeType == 'time') {\r\n        // debugger\r\n        let startTime = picker.getValues();\r\n        this.curTimeText = startTime[0] + \":\" + startTime[1] + this.curTimeText.slice(5);\r\n        this.overTime = this.overTime.slice(0, 11) + startTime[0] + \":\" + startTime[1];\r\n      }\r\n    },\r\n    changeTimeType(type) {\r\n      if (type == 'time') {\r\n        this.getCurTime(this.currentDate, true)\r\n      } else {\r\n\r\n      }\r\n      this.timeType = type;\r\n    },\r\n    submit() {\r\n      if (this.titleText == '问题处理') {\r\n        this.$getHttp(`${this.$baseUrl}/CMS/agreementquestionmanagement/personCommit`,\r\n        {\r\n          params: {\r\n            questionId: this.questionId,\r\n            type: this.justType,\r\n            personId: this.forwardValue,\r\n            fileId: this.pictureId ? this.pictureId.toString() : '',\r\n            name: this.forwardTitle,\r\n            overTime: new Date().toLocaleDateString().replace(/\\//g, '-')\r\n          }\r\n        }\r\n        ).then(res=> {\r\n          console.log('personCommit', res)\r\n          if (res.status == 200) {\r\n            this.$emit('changeCloseHandling', true)\r\n          }\r\n        })\r\n      } else {\r\n        if (this.completionTitle == '') {\r\n          alert('请选择完成情况');\r\n          return;\r\n        }\r\n        this.$getHttp(`${this.$baseUrl}/CMS/agreementquestionmanagement/questionValidate`, \r\n          {\r\n            params: {\r\n              questionId: this.questionId,\r\n              state: this.completionTitle == '合格' ? 'COMMIT' : 'SAVE',\r\n              comment: this.description\r\n            }\r\n          }\r\n        ).then(res=> {\r\n          console.log('questionValidate', res)\r\n          if (res.status == 200) {\r\n            this.$emit('changeCloseHandling')\r\n          }\r\n        })\r\n\r\n      }\r\n    },\r\n    getCurTime(curTime, flag) { //   逻辑有问题 暂时不浪费时间改（选完时间切换到日期不会保存）\r\n      debugger\r\n      let y, month, day;\r\n      if (this.timeType == 'time') {\r\n        this.curTimeText = curTime + this.curTimeText.slice(5)\r\n      } else {\r\n        y = curTime.toLocaleDateString().split('/')[0];\r\n        month = curTime.toLocaleDateString().split('/')[1] - 1;\r\n        day = curTime.toLocaleDateString().split('/')[2];\r\n        if (!flag) {\r\n          this.overTime = curTime.toLocaleString('zh-CN',{year:'numeric', month:'2-digit',day:'2-digit', hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false}).replace(/\\//g, '-')  //  要求完成时间\r\n        }\r\n        this.curDateText = y + '年' + (month + 1) + '月' + day + '日';\r\n        this.curTimeText = this.overTime.split(' ')[1];\r\n      }\r\n\r\n      if (!flag) {\r\n        // this.showTime = this.curDateText + ' ' + this.curTimeText;\r\n      } else {  //  确定时间 保存\r\n        this.showTime = this.curDateText + ' ' + this.curTimeText;\r\n      }\r\n      this.currentDate = new Date(y, month, day);\r\n    },\r\n\r\n    async getUserName() { //  获取当前登录人判断\r\n     const res = await this.$getHttp(`${this.$baseUrl}/CMS/uams/getUserInfo`);\r\n      console.log('getUserInfonb1', res)\r\n      if (res.status == 200) {\r\n        this.userName = res.data.name;\r\n        console.log('this.userName', this.userName)\r\n      }\r\n    },\r\n    getCurProblem(curProblemId) {\r\n      let paramsName = '';\r\n      this.$postHttp(`${this.$baseUrl}/CMS/agreementquestionmanagement/getQuestion`, {id: curProblemId}).then(res=> { //  获取当前这条问题的信息\r\n        console.log('获取当前这条问题的信息', res, '当前用户', this.userName)\r\n        if (res.data.code == 200) {\r\n          if (res.data.data.question[0].conperson == this.userName) {\r\n            paramsName = res.data.data.question[0].contractor\r\n            this.justType = 'con'\r\n          } else if (res.data.data.question[0].supPerson == this.userName) {\r\n            paramsName = res.data.data.question[0].supervisory_unit\r\n            this.justType = 'sup'\r\n          } else {\r\n            paramsName = res.data.data.question[0].territorial_unit\r\n            this.justType = 'ter'\r\n          }\r\n          this.getPeople(paramsName)\r\n        }\r\n      })\r\n    },\r\n\r\n\r\n    getProblemList(arr) {  //  新增之后的 问题列表 (因业务逻辑更改不用这个方法，但我不删 以防后患)\r\n      this.problemList = [];\r\n      this.justProblem = [];\r\n      let paramsName = '';\r\n      this.$postHttp(`${this.$baseUrl}/CMS/agreementquestionmanagement/getQuestion`, {}).then(res=> {\r\n        debugger\r\n        console.log('getQuestion', res)\r\n        if (res.data.code == 200) {\r\n          this.problemList = res.data.data.question;\r\n          console.log('this.problemList' ,this.problemList)\r\n          console.log('problemList' , arr)\r\n          this.justProblem = this.problemList.filter(item=> !arr.some(ele=> ele.id === item.id));\r\n          console.log('justProblem', this.justProblem)\r\n          this.$postHttp(`${this.$baseUrl}/CMS/agreementquestionmanagement/getQuestion`, {id: this.justProblem[0].id}).then(res=> { //  获取当前这条问题的信息\r\n            console.log('获取当前这条问题的信息', res)\r\n            if (res.data.code == 200) {\r\n              if (res.data.data.question[0].conperson == this.userName) {\r\n                paramsName = res.data.data.question[0].contractor\r\n                this.justType = 'con'\r\n              } else if (res.data.data.question[0].supPerson == this.userName) {\r\n                paramsName = res.data.data.question[0].supervisory_unit\r\n                this.justType = 'sup'\r\n              } else {\r\n                paramsName = res.data.data.question[0].territorial_unit\r\n                this.justType = 'ter'\r\n              }\r\n              this.getPeople(paramsName)\r\n            }\r\n          })\r\n        }\r\n      }).catch(err=> {\r\n        // debugger\r\n      })\r\n    },\r\n    getPeople(paramsName) { //  请求转发人接口\r\n      this.forward = [];\r\n      this.$getHttp(`${this.$baseUrl}/OS-PM/organization/findUserByOrgName/${paramsName}`).then(res=> {\r\n        console.log('findUserByOrgName', res)\r\n        if(res.status == 200) {\r\n          res.data.forEach(item=> {\r\n            const obj = {\r\n              text: item.userName,\r\n              value: item.id\r\n            }\r\n            this.forward.push(obj)\r\n          })\r\n\r\n        }\r\n      }).catch(err=> {\r\n\r\n      })\r\n    },\r\n    async init(curProblemId, state) { //  arr 为新增之前的问题数据\r\n    debugger\r\n      this.titleText = state == 1 ? '问题处理' : '问题验证'\r\n      this.questionId = curProblemId;\r\n      await this.getUserName();\r\n      this.getCurProblem(curProblemId);\r\n      // this.getProblemList(arr);\r\n\r\n    },\r\n    reset() { //  重置处理、验证表单\r\n      this.userName = '';\r\n      this.pictureId = [];\r\n      this.problemImg = [];\r\n      this.forward = [];\r\n      this.forwardTitle ='';\r\n      this.forwardValue ='';\r\n\r\n\r\n      this.completion = [];\r\n      this.completionTitle = '';\r\n      this.completionValue = '';\r\n      this.description = '';\r\n    }\r\n  },\r\n  mounted() {\r\n    \r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n  .container {\r\n    .mobile-body {\r\n      height: calc(100vh - 8.375rem);\r\n      .van-cell {\r\n        padding-left: 0rem;\r\n      }\r\n      .item {\r\n        width: 100%;\r\n        p {\r\n            margin-top: 1rem;\r\n            margin-bottom: 0.25rem;\r\n          }\r\n        .time-frame, .img-frame {\r\n          width: 100%;\r\n          height: 3.125rem;\r\n          border: 1px solid #808187 !important;\r\n          border-radius: 0.5rem !important;\r\n          display: flex;\r\n          align-items: center;\r\n          img {\r\n            flex: 1;\r\n            width: 1.5rem;\r\n            height: 1.5rem;\r\n            vertical-align: middle;\r\n          }\r\n          span {\r\n            flex: 5;\r\n          }\r\n        }\r\n        /deep/ .van-dropdown-menu__bar {  //  下拉样式\r\n          border: 1px solid #808187 !important;\r\n          border-radius: 0.5rem !important;\r\n        }\r\n        textarea {\r\n          width: 100%; \r\n          resize:none;\r\n          margin-top: -0.1rem;  \r\n          border-radius: 0.5rem;\r\n          border-color: #B4B4B4;\r\n          box-sizing: border-box;\r\n          padding: 1rem;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .float-button {\r\n    width: 90%;\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    margin: auto;\r\n    bottom: 1rem;\r\n  }\r\n  .time-popup {\r\n    padding: 1rem;\r\n    padding-bottom: 0rem;\r\n    h3 {\r\n      font-size: 1.375rem;\r\n      font-weight: 500;\r\n      color: #1E1E1E;\r\n    }\r\n    p {\r\n      font-size: 1rem;\r\n      margin: 1rem 0rem;\r\n    }\r\n    /deep/ .van-picker {\r\n      position: relative;\r\n      .van-picker__toolbar {\r\n        position: absolute;\r\n        right: 0rem;\r\n        bottom: 0.2rem;\r\n        z-index: 2;\r\n        font-size: 0.875rem;\r\n      }\r\n      .van-picker__columns {\r\n        box-sizing: border-box;\r\n        padding-bottom: 2.8rem;\r\n      }\r\n    }\r\n  }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./problemHandling.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./problemHandling.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./problemHandling.vue?vue&type=template&id=bfae71c4&scoped=true&\"\nimport script from \"./problemHandling.vue?vue&type=script&lang=js&\"\nexport * from \"./problemHandling.vue?vue&type=script&lang=js&\"\nimport style0 from \"./problemHandling.vue?vue&type=style&index=0&id=bfae71c4&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bfae71c4\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/hook.e21e21be.svg\";","module.exports = __webpack_public_path__ + \"img/add_img.ca323127.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./problemHandling.vue?vue&type=style&index=0&id=bfae71c4&prod&lang=less&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/date.6d33281b.svg\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"problem-mange-details\"},[_c('div',{staticClass:\"title\"},[_c('navBar',{attrs:{\"titleText\":'问题详情',\"svgIconRight\":_vm.deleteSvg},on:{\"clickRight\":_vm.openDelete}})],1),_c('div',{staticClass:\"problem-mange-body\"},[_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"合同名称\",\"label\":_vm.info.agreementName ? _vm.info.agreementName : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"合同编号\",\"label\":_vm.info.agreementCode ? _vm.info.agreementCode : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"服务类型\",\"label\":_vm.info.agreementCategory ? _vm.info.agreementCategory : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"问题类型一\",\"label\":_vm.info.oneCategory ? _vm.info.oneCategory : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"问题类型二\",\"label\":_vm.info.twoCategory ? _vm.info.twoCategory : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"违反条例\",\"label\":_vm.info.confContent ? _vm.info.confContent : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"违反文件\",\"label\":_vm.info.programFileName ? _vm.info.programFileName : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"问题大小分类\",\"label\":_vm.info.questionSize ? _vm.info.questionSize : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"赋予分值\",\"label\":_vm.info.score ? _vm.info.score : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"检查单位\",\"label\":_vm.info.check_contractor ? _vm.info.check_contractor : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"检查人\",\"label\":_vm.info.check_user ? _vm.info.check_user : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"检查日期\",\"label\":_vm.info.checkTime ? _vm.info.checkTime : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"项目名称\",\"label\":_vm.info.project_name ? _vm.info.project_name : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"项目编码\",\"label\":_vm.info.project_code ? _vm.info.project_code : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"监理单位\",\"label\":_vm.info.supervisory_unit ? _vm.info.supervisory_unit : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"承包商\",\"label\":_vm.info.contractor ? _vm.info.contractor : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"属地单位\",\"label\":_vm.info.territorial_unit ? _vm.info.territorial_unit : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"问题归类\",\"label\":_vm.info.question_category ? _vm.info.question_category : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"问题专业\",\"label\":_vm.info.question_major ? _vm.info.question_major : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"问题描述\",\"label\":_vm.info.question_content ? _vm.info.question_content : '无'}}),[_c('div',{staticClass:\"view-image-box\"},[_c('p',[_vm._v(\"问题图片\")]),_c('van-uploader',{attrs:{\"deletable\":false,\"show-upload\":false,\"multiple\":\"\",\"disabled\":\"\"},model:{value:(_vm.info.file),callback:function ($$v) {_vm.$set(_vm.info, \"file\", $$v)},expression:\"info.file\"}})],1)],_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"甲方项目负责人\",\"label\":_vm.info.a_boss ? _vm.info.a_boss : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"甲方监护人\",\"label\":_vm.info.a_guardian ? _vm.info.a_guardian : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"乙方项目负责人\",\"label\":_vm.info.b_boss ? _vm.info.b_boss : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"乙方监护人\",\"label\":_vm.info.b_guardian ? _vm.info.b_guardian : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"承包商责任\",\"label\":_vm.handleBackStr(_vm.info.contractor_director) ? _vm.handleBackStr(_vm.info.contractor_director) : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"监理单位责任\",\"label\":_vm.handleBackStr(_vm.info.supervisory_director) ? _vm.handleBackStr(_vm.info.supervisory_director) : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"属地单位责任\",\"label\":_vm.handleBackStr(_vm.info.territorial_director) ? _vm.handleBackStr(_vm.info.territorial_director) : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"扣分\",\"label\":_vm.info.koufen ? _vm.info.koufen : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"要求完成时间\",\"label\":_vm.info.overTime ? _vm.info.overTime : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"考核金额\",\"label\":_vm.info.money ? _vm.info.money : '无'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"是否现场完成\",\"label\":_vm.isScene ? '是' : '否'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"是否违反六大禁令\",\"label\":_vm.info.banId ? _vm.info.banId : '否'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"是否违反员工不安全行为\",\"label\":_vm.info.personId ? _vm.info.personId : '否'}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"是否违反承包商人员不安全行为\",\"label\":_vm.info.cpersonId ? _vm.info.cpersonId : '否'}}),_c('hr',{staticStyle:{\"color\":\"#F3F3F3\"}}),_vm._l((_vm.person),function(item,i){return _c('div',{key:i},[_c('van-cell',{attrs:{\"center\":\"\",\"title\":item.personType,\"label\":item.personName}}),_c('van-cell',{attrs:{\"center\":\"\",\"title\":\"问题整改完成时间\",\"label\":item.overTime}}),[_c('div',{staticClass:\"view-image-box\"},[_c('p',[_vm._v(\"问题图片\")]),_c('van-uploader',{attrs:{\"deletable\":false,\"show-upload\":false,\"multiple\":\"\",\"disabled\":\"\"},model:{value:(item.file),callback:function ($$v) {_vm.$set(item, \"file\", $$v)},expression:\"item.file\"}})],1)]],2)})],2),(_vm.btnSTate != 0)?_c('div',{staticClass:\"float-button\"},[_c('van-button',{attrs:{\"type\":\"info\"},on:{\"click\":function($event){return _vm.to(_vm.btnSTate)}}},[_c('img',{attrs:{\"src\":_vm.btnSTate == 1 ? _vm.hook : _vm.doubleHook}}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.btnTextVisible),expression:\"!btnTextVisible\"}]},[(_vm.btnSTate == 1)?_c('span',[_vm._v(\"问题处理\")]):_vm._e(),(_vm.btnSTate == 2)?_c('span',[_vm._v(\"问题验证\")]):_vm._e()])])],1):_vm._e(),_c('van-popup',{style:({ width: '70%', padding: '1rem'}),attrs:{\"round\":\"\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('h3',[_vm._v(\"删除问题\")]),_c('p',{staticStyle:{\"margin\":\"1rem 0rem\"}},[_vm._v(\"你确定删除该问题？该操作不可撤销\")]),_c('p',{staticStyle:{\"text-align\":\"right\"}},[_c('van-button',{staticStyle:{\"border\":\"'none'\"},on:{\"click\":function($event){_vm.show = false}}},[_vm._v(\"取消\")]),_c('van-button',{attrs:{\"round\":\"\",\"type\":\"danger\"},on:{\"click\":_vm.mustDel}},[_vm._v(\"删除\")])],1)]),_c('van-popup',{style:({ height: '100%' }),attrs:{\"position\":\"bottom\"},model:{value:(_vm.handlingShow),callback:function ($$v) {_vm.handlingShow=$$v},expression:\"handlingShow\"}},[_c('problemHandling',{ref:\"problemHandling\",on:{\"changeCloseHandling\":_vm.changeCloseHandling}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<!-- 问题管理详情页 -->\r\n  <div class=\"problem-mange-details\">\r\n    <div class=\"title\">\r\n      <navBar :titleText=\"'问题详情'\" :svgIconRight='deleteSvg' @clickRight='openDelete'></navBar>\r\n    </div>\r\n    <div class=\"problem-mange-body\">\r\n      <!-- {{btnSTate}} -->\r\n        <van-cell center title=\"合同名称\" :label=\"info.agreementName ? info.agreementName : '无'\" />\r\n        <van-cell center title=\"合同编号\" :label=\"info.agreementCode ? info.agreementCode : '无'\" />\r\n        <van-cell center title=\"服务类型\" :label=\"info.agreementCategory ? info.agreementCategory : '无'\" />\r\n        <van-cell center title=\"问题类型一\" :label=\"info.oneCategory ? info.oneCategory : '无'\" />\r\n        <van-cell center title=\"问题类型二\" :label=\"info.twoCategory ? info.twoCategory : '无'\" />\r\n        <van-cell center title=\"违反条例\" :label=\"info.confContent ? info.confContent : '无'\" />\r\n        <van-cell center title=\"违反文件\" :label=\"info.programFileName ? info.programFileName : '无'\" />\r\n        <van-cell center title=\"问题大小分类\" :label=\"info.questionSize ? info.questionSize : '无'\" />\r\n        <van-cell center title=\"赋予分值\" :label=\"info.score ? info.score : '无'\" />\r\n        <van-cell center title=\"检查单位\" :label=\"info.check_contractor ? info.check_contractor : '无'\" />\r\n        <van-cell center title=\"检查人\" :label=\"info.check_user ? info.check_user : '无'\" />\r\n        <van-cell center title=\"检查日期\" :label=\"info.checkTime ? info.checkTime : '无'\" />\r\n        <van-cell center title=\"项目名称\" :label=\"info.project_name ? info.project_name : '无'\" />\r\n        <van-cell center title=\"项目编码\" :label=\"info.project_code ? info.project_code : '无'\" />\r\n        <van-cell center title=\"监理单位\" :label=\"info.supervisory_unit ? info.supervisory_unit : '无'\" />\r\n        <van-cell center title=\"承包商\" :label=\"info.contractor ? info.contractor : '无'\" />\r\n        <van-cell center title=\"属地单位\" :label=\"info.territorial_unit ? info.territorial_unit : '无'\" />\r\n        <van-cell center title=\"问题归类\" :label=\"info.question_category ? info.question_category : '无'\" />\r\n        <van-cell center title=\"问题专业\" :label=\"info.question_major ? info.question_major : '无'\" />\r\n        <van-cell center title=\"问题描述\" :label=\"info.question_content ? info.question_content : '无'\" />\r\n        <template>\r\n        <div class=\"view-image-box\">\r\n          <p>问题图片</p>\r\n          <!-- file -->\r\n          <van-uploader v-model=\"info.file\" :deletable=\"false\" :show-upload='false' multiple disabled/>\r\n        </div>\r\n        </template>\r\n        <van-cell center title=\"甲方项目负责人\" :label=\"info.a_boss ? info.a_boss : '无'\" />\r\n        <van-cell center title=\"甲方监护人\" :label=\"info.a_guardian ? info.a_guardian : '无'\" />\r\n        <van-cell center title=\"乙方项目负责人\" :label=\"info.b_boss ? info.b_boss : '无'\" />\r\n        <van-cell center title=\"乙方监护人\" :label=\"info.b_guardian ? info.b_guardian : '无'\" />\r\n        <van-cell center title=\"承包商责任\" :label=\"handleBackStr(info.contractor_director) ? handleBackStr(info.contractor_director) : '无'\" />\r\n        <van-cell center title=\"监理单位责任\" :label=\"handleBackStr(info.supervisory_director) ? handleBackStr(info.supervisory_director) : '无'\" />\r\n        <van-cell center title=\"属地单位责任\" :label=\"handleBackStr(info.territorial_director) ? handleBackStr(info.territorial_director) : '无'\" />\r\n        <van-cell center title=\"扣分\" :label=\"info.koufen ? info.koufen : '无'\" />\r\n        <van-cell center title=\"要求完成时间\" :label=\"info.overTime ? info.overTime : '无'\" />\r\n        <van-cell center title=\"考核金额\" :label=\"info.money ? info.money : '无'\" />\r\n        <van-cell center title=\"是否现场完成\" :label=\"isScene ? '是' : '否'\" />\r\n        <van-cell center title=\"是否违反六大禁令\" :label=\"info.banId ? info.banId : '否'\" />\r\n        <van-cell center title=\"是否违反员工不安全行为\" :label=\"info.personId ? info.personId : '否'\" />\r\n        <van-cell center title=\"是否违反承包商人员不安全行为\" :label=\"info.cpersonId ? info.cpersonId : '否'\" />\r\n        <hr style=\"color: #F3F3F3\">\r\n<!-- 以下是其他处理人，人数不固定需要循环 -->\r\n        <div v-for=\"(item, i) in person\" :key=\"i\">\r\n          <van-cell center :title=\"item.personType\" :label=\"item.personName\" />\r\n          <van-cell center title=\"问题整改完成时间\" :label=\"item.overTime\" />\r\n          <template>\r\n          <div class=\"view-image-box\">\r\n            <p>问题图片</p>\r\n            <van-uploader v-model=\"item.file\" :deletable=\"false\" :show-upload='false' multiple disabled/>\r\n          </div>\r\n          </template>\r\n          <!-- 去掉： 详情页 查看的时候pc端没有显示转发人 -->\r\n          <!-- <van-cell center title=\"转发\" :label=\"item\" /> -->\r\n        </div>\r\n    </div>\r\n    <!-- <div v-if=\"true\" class=\"float-button\">\r\n      <van-button type=\"info\" @click=\"to(2)\"> -->\r\n\r\n    <div v-if=\"btnSTate != 0\" class=\"float-button\">\r\n      <van-button type=\"info\" @click=\"to(btnSTate)\">\r\n        <img :src=\"btnSTate == 1 ? hook : doubleHook\">\r\n        <!-- state EDIT && (conperson == username || supPerson == username || terPerson == username)  处理 -->\r\n        <!-- state SAVE && (checkPerson == username)  验证 -->\r\n        <!-- state COMMIT -->\r\n        <span v-show=\"!btnTextVisible\">\r\n          <!-- {{\r\n            info.state == 'EDIT' && (info.conperson == userName || info.supPerson == userName || info.terPerson == userName) ? '问题处理' : \r\n            info.state == 'SAVE' && info.checkPerson == userName ? '问题验证' : ''\r\n          }} -->\r\n          <span v-if=\"btnSTate == 1\">问题处理</span>\r\n          <span v-if=\"btnSTate == 2\">问题验证</span>\r\n        </span>\r\n      </van-button>\r\n    </div>\r\n    <!-- 删除提示框 start -->\r\n    <van-popup v-model=\"show\" round :style=\"{ width: '70%', padding: '1rem'}\">\r\n      <h3>删除问题</h3>\r\n      <p style=\"margin: 1rem 0rem\">你确定删除该问题？该操作不可撤销</p>\r\n      <p style=\"text-align: right\">\r\n        <van-button style=\"border: 'none'\" @click=\"show = false\">取消</van-button>\r\n        <van-button round type=\"danger\" @click=\"mustDel\">删除</van-button>\r\n      </p>\r\n    </van-popup>\r\n    <!-- 删除提示框 end -->\r\n    <!-- 弹出 问题处理 start -->\r\n    <van-popup\r\n    v-model=\"handlingShow\"\r\n    position=\"bottom\"\r\n    :style=\"{ height: '100%' }\"\r\n    >\r\n    <problemHandling ref=\"problemHandling\" @changeCloseHandling='changeCloseHandling'></problemHandling>\r\n    </van-popup>\r\n    <!-- 弹出 问题处理 end -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport navBar from '@/components/navBar.vue';\r\nimport problemHandling from './problemHandling.vue';\r\n\r\nexport default {\r\n  name: 'ProblemMangeDetails',\r\n  components: {\r\n    navBar,\r\n    problemHandling\r\n  },\r\n  computed: {\r\n    isScene() {  //  是否现场完成状态\r\n      return this.person.length == 1  //   == 1 是 , > 1 否\r\n    },\r\n    btnSTate () {\r\n      var flag = 0; //  0 仅能查看按钮消失，1 按钮显示问题处理  2 按钮显示问题验证\r\n      if (this.info.state == 'EDIT' && (this.info.conperson == this.userName || this.info.supPerson == this.userName || this.info.terPerson == this.userName)) {\r\n        flag = 1;\r\n      } else if (this.info.state == 'SAVE' && this.info.checkPerson == this.userName) {\r\n        flag = 2\r\n      }\r\n      return flag\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      btnTextVisible: false,\r\n      show: false,\r\n      handlingShow: false,\r\n      fileList: [],\r\n      \r\n      person: [], // 处理人\r\n      info: {}, //  问题详情\r\n      userName: '', //  当前登录人\r\n      hook: require('@/assets/problemManageSvg/hook.svg'),\r\n      doubleHook: require('@/assets/problemManageSvg/doubleHook.svg'),\r\n      deleteSvg: require('@/assets/problemManageSvg/deleteSvg.svg'),\r\n    }\r\n  },\r\n  methods: {\r\n    to(btn) {\r\n        this.handlingShow = true;\r\n        this.$nextTick(()=> {\r\n          this.$refs.problemHandling.init(this.$route.query.item.id, btn)\r\n        })\r\n\r\n      // if (btn == 1) {\r\n      //   this.handlingShow = true;\r\n      //   this.$nextTick(()=> {\r\n      //     this.$refs.problemHandling.init(this.info, this) //  先不搞这个，不确定详情的问题处理和新增的问题处理是不是一个处理页面\r\n      //   })\r\n      // } else {\r\n\r\n      // }\r\n    },\r\n    changeCloseHandling() {\r\n      this.handlingShow = false;\r\n      this.$router.push({name: 'ProblemMange'})\r\n    },\r\n    openDelete() {\r\n      this.show = true;\r\n      \r\n    },\r\n    mustDel() {\r\n      this.show = false;\r\n      this.$router.push({name: 'ProblemMange'})\r\n    },\r\n    getProblemDetails() {\r\n      this.$postHttp(`${this.$baseUrl}/CMS/agreementquestionmanagement/getQuestion`, \r\n      {\r\n        id: this.$route.query.item.id\r\n      }\r\n      ).then(res=> {\r\n        debugger\r\n        console.log('getQuestion--details', res)\r\n        if (res.data.code == 200) {\r\n          res.data.data.person.forEach(item=> {\r\n            item.file = item.file.map(e=> {\r\n              return {url: this.$baseUrl + '/CMS/upload' + e.filePath}\r\n            })\r\n          });\r\n          this.person = res.data.data.person;\r\n\r\n          res.data.data.question[0].file = res.data.data.question[0].file.map(item=> {\r\n            return {url: this.$baseUrl + '/CMS/upload' + item.filePath}\r\n          })\r\n          this.info = res.data.data.question[0];\r\n          console.log('this.person', this.person, 'this.info', this.info)\r\n        }\r\n      }).catch(err=> {\r\n        debugger\r\n      })\r\n    },\r\n    getUserName() { //  获取当前登录人判断 当前按钮的状态\r\n      this.$getHttp(`${this.$baseUrl}/CMS/uams/getUserInfo`).then(res=> {\r\n        console.log('getUserInfo', res)\r\n        if (res.status == 200) {\r\n          this.userName = res.data.name;\r\n          console.log('this.userName', this.userName)\r\n        }\r\n      })\r\n    },\r\n    handleBackStr(str) { //  处理返回的字符串\r\n    // debugger\r\n      if (!str) return;\r\n      let backStr = '';\r\n      str.split(',').forEach(item=> {\r\n       backStr = item.split(';')[1] + ',' + backStr\r\n      })\r\n      return backStr.slice(0, backStr.length - 1)\r\n    },\r\n    changeScroll() {\r\n      let timeoutHdr = null\r\n      // 开始滚动时执行的代码\r\n      this.btnTextVisible = true;\r\n      window.clearTimeout(timeoutHdr)\r\n      timeoutHdr = window.setTimeout(() => {\r\n        // 滚动停止时执行的代码\r\n        this.btnTextVisible = false;\r\n      }, 101)\r\n    }\r\n  },\r\n  mounted() {\r\n    // debugger\r\n    this.getProblemDetails();\r\n    this.getUserName();\r\n    document.querySelector('.problem-mange-body').addEventListener('scroll', this.changeScroll)\r\n  },\r\n  beforeDestroy() {\r\n    document.querySelector('.problem-mange-body').removeEventListener('scroll', this.changeScroll)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n  * {\r\n    padding: 0;\r\n    margin: 0;\r\n  }\r\n  .problem-mange-details {\r\n    .problem-mange-body {\r\n      // max-height: 100vh - 5.375rem;\r\n      height: calc(100vh - 4.375rem);\r\n      overflow: auto;\r\n      box-sizing: border-box;\r\n      padding: 0rem 1rem;\r\n      .van-cell {\r\n        margin: 1rem 0rem;\r\n      }\r\n      .info-name {\r\n        .van-cell__title {\r\n          font-size: 1.5rem;\r\n          font-weight: 500;\r\n        }\r\n      }\r\n      .van-cell__title {\r\n        font-size: 1rem;\r\n        .van-cell__label {\r\n          font-size: 0.875rem;\r\n          margin-top: 0.25rem;\r\n        }\r\n      }\r\n      .view-image-box {\r\n        box-sizing: border-box;\r\n        padding: 0rem 1rem;\r\n        margin-bottom: 1rem;\r\n        border: 1px solid #B4B4B4;\r\n        border-radius: 0.75rem;\r\n        font-size: 1rem;\r\n        p {\r\n          margin: .5rem 0rem;\r\n        }\r\n      }\r\n    }\r\n    .float-button {\r\n      position: fixed;\r\n      right: 1rem;\r\n      bottom: 1rem;\r\n      .van-button {\r\n        border-radius: 1rem;\r\n        font-size: 0.875rem;\r\n        background: #0247fe;\r\n        padding: 1rem;\r\n        img {\r\n          vertical-align: middle;\r\n          margin-right: 0.25rem;\r\n        }\r\n      }\r\n    }\r\n    .van-popup {\r\n      // padding: 1rem;\r\n      h3 {\r\n        font-size: 1.375rem;\r\n        font-weight: 500;\r\n      }\r\n      p {\r\n        font-size: 0.875rem;\r\n      }\r\n      .van-button:nth-child(1) {\r\n        border: none;\r\n      }\r\n      .van-button:nth-child(2) {\r\n        margin-left: 1rem;\r\n        padding: 0rem 1rem;\r\n      }\r\n    }\r\n  }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./problemMangeDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./problemMangeDetails.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./problemMangeDetails.vue?vue&type=template&id=a20ab11a&scoped=true&\"\nimport script from \"./problemMangeDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./problemMangeDetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./problemMangeDetails.vue?vue&type=style&index=0&id=a20ab11a&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a20ab11a\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/doubleHook.6a8b4cf3.svg\";","module.exports = __webpack_public_path__ + \"img/close.e7685cae.svg\";"],"sourceRoot":""}